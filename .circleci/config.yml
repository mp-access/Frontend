version: 2.1

# CircleCI Packages
orbs:
  docker: circleci/docker@2.0.1   # Pre-configured Docker jobs, see circleci.com/developer/orbs/orb/circleci/docker
  node: circleci/node@5.0.0       # Pre-configured npm jobs, see circleci.com/developer/orbs/orb/circleci/node

jobs:
  install-dependencies:   
    docker:
      - image: cimg/base:stable
    steps:
      - checkout
      - node/install            # Install Node.js and npm, includes caching (circleci/node command)
      - node/install-packages   # Install dependencies, includes caching (circleci/node command)

workflows:
  access-frontend-workflow:
    jobs:
      - install-dependencies    # Install and cache the frontend dependencies
      - docker/publish:         # Build and push the frontend image to Docker Hub (circleci/docker job)
          image: sealuzh/access-frontend
          tag: updates
          # See the Frontend project env variables DOCKER_LOGIN, DOCKER_PASSWORD for credentials